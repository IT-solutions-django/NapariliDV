{% extends 'base.html' %}
{% load static %}
{% load price_filters %}

{% block title %}Напарили ДВ{% endblock %}

{% block content %}
<div class="slider">
    {% for slide in slides %}
    <div class="slider-item">
        <div class="slider-heading container">
            <h2>{{ slide.title }}</h2>
            <hr>
            <div class="slider-heading__promo">
                {{ slide.description|linebreaks }}
                <div class="slider-heading__want-the-house-button">
                    <button class="openModal">
                        <img src="{% static 'images/want-the-house.svg' %}" alt="">
                    </button>
                </div>
            </div>
        </div>
        <img class="slider-image" src="{{ slide.photo.url }}" alt="{{ slide.title }}">
        <div class="slider-content">
            <div class="slider-content-inner">
                <ul class="table-of-contents">
                    <li><span>Площадь</span><span>{{ slide.square }} м²</span></li>
                    <li><span>Количество спален</span><span>{{ slide.bedrooms_quantity }}</span></li>
                    <li><span>Количество санузлов</span><span>{{ slide.bathrooms_quantity }}</span></li>
                    <li><span>Стоимость</span><span>от {{ slide.price|price_format }} р</span></li>
                </ul>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

<div class="advantages container">
    <div class="advantages__heading">
        <h3>Наши преимущества</h3>
        <hr>
    </div>
    <div class="advantages__stats">
        <div class="advantages__stats-column">
            <div class="advantages__stats-number">
                <p>10</p>
            </div>
            <div class="advantages__stats-label">
                Лет на рынке
            </div>
        </div>
        <div class="advantages__stats-column">
            <div class="advantages__stats-number">
                <p>315</p>
            </div>
            <div class="advantages__stats-label">
                Домов<br>построено
            </div>
        </div>
        <div class="advantages__stats-column">
            <div class="advantages__stats-number">
                <p>3600</p>
            </div>
            <div class="advantages__stats-label">
                Довольных<br> клиента
            </div>
        </div>
    </div>

    <div class="advantages__details">
        <div class="advantages__details-row">
            <div class="advantages__textblock">
                <div class="advantages__details-heading">
                    <p>100% «под ключ»</p>
                </div>
                <div>
                    <p class="font__inter">Не следует, однако, забывать, что внедрение современных методик говорит
                        о возможностях системы обучения кадров, соответствующей насущным потребностям</p>
                </div>
            </div>
            <div class="advantages__textblock">
                <div class="advantages__details-heading">
                    <p>100% «под ключ»</p>
                </div>
                <div>
                    <p>Не следует, однако, забывать, что внедрение современных методик говорит
                        о возможностях системы обучения кадров, соответствующей насущным потребностям</p>
                </div>
            </div>
            <div class="advantages__textblock">
                <div class="advantages__details-heading">
                    <p>100% «под ключ»</p>
                </div>
                <div>
                    <p>Не следует, однако, забывать, что внедрение современных методик говорит
                        о возможностях системы обучения кадров, соответствующей насущным потребностям</p>
                </div>
            </div>
        </div>
        <div class="advantages__details-row advantages__details-row-with-images">
            <div class="advantages__details-big-left-column">
                <div>
                    <img src="static/images/advantages1.png" alt="">
                </div>
            </div>
            <div class="advantages__details-small-right-column">
                <div class="advantages__textblock">
                    <div class="advantages__details-heading">
                        <p>100% «под ключ»</p>
                    </div>
                    <div>
                        <p>Не следует, однако, забывать, что внедрение современных методик говорит
                            о возможностях системы обучения кадров, соответствующей насущным потребностям</p>
                    </div>
                </div>
                <div>
                    <img src="static/images/advantages1.png" alt="">
                </div>
                <div class="advantages__choose-house">
                    <button>
                        <a target="_blank" href="{% url 'projects:catalog' %}">
                            <img src="static/images/choose-house-button.svg" alt="">
                        </a>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="best-projects container">
    <div id="bestProjects" class="best-projects__header">
        <div class="best-projects__heading">
            <h4>Топ 12 проектов</h4>
        </div>
        <div class="best-projects__to-catalog">
            <a target="_blank" href="{% url 'projects:catalog' %}">В каталог</a>
        </div>
    </div>
    <div class="best-projects__filters-adaptive">
        <div>
            <p>Выбрать дом по параметрам</p>
        </div>
        <div>
            <button>
                <img src="{% static 'images/filters-icon.svg' %}" alt="">
            </button>
        </div>
    </div>
    <div class="best-projects__filters">
        <form id="bestProjectsForm" action="/#bestProjects">
            <div class="best-projects__filters-form">
                <div>
                    <div class="best-projects__radio-filter">
                        <label for="" class="best-projects__filters-label">Количество спален</label>
                        <div class="best-projects__radio-group">
                            {% for bedroom in filter_form.bedrooms_quantity %}
                            <div class="best-projects__radio-button">
                                <input 
                                    type="radio" 
                                    name="{{ bedroom.data.name }}" 
                                    value="{{ bedroom.data.value }}"
                                    class="radio-toggle"
                                    id="{{ bedroom.id_for_label }}" 
                                    {% if bedroom.data.selected %}checked data-was-checked="true"{% endif %}
                                >
                                <label for="{{ bedroom.id_for_label }}">{{ bedroom.choice_label }}</label>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="best-projects__radio-filter">
                        <label for="" class="best-projects__filters-label">Этажей</label>
                        <div class="best-projects__radio-group">
                            {% for floor in filter_form.floors_quantity %}
                            <div class="best-projects__radio-button">
                                <input 
                                    type="radio" 
                                    name="{{ floor.data.name }}" 
                                    value="{{ floor.data.value }}"
                                    class="radio-toggle"
                                    id="{{ floor.id_for_label }}" 
                                    {% if floor.data.selected %}checked data-was-checked="true"{% endif %}
                                >
                                <label for="{{ floor.id_for_label }}">{{ floor.choice_label }}</label>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                <div>
                    <div class="best-projects__select-filter">
                        {{ filter_form.materials }}
                    </div>

                    <div class="best-projects__number-filter">
                        <div class="best-projects__number">
                            <label for="min-price">От</label>
                            {{ filter_form.price_min }}
                        </div>
                        <div class="best-projects__number">
                            <label for="max-price">До</label>
                            {{ filter_form.price_max }}
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="best-projects__cards">
        {% for project in best_projects %}
        <div class="best-projects__card">
            <div class="photo-slider">
                {% for photo in project.photos.all %}
                <div class="best-projects__card-image photo-slider-item">
                    <img src="{{ photo.image.url }}" alt="Фото проекта">
                </div>
                {% endfor %}
            </div>
            <div class="best-projects__card-text-container">
                <div class="best-projects__card-heading">
                    <a target="_blank" href="{{ project.get_absolute_url }}">{{ project.name }}</a>

                </div>
                <hr>
                <div class="best-projects__card-content">
                    <ul class="table-of-contents">
                        <li><span>Площадь</span><span>{{ project.square }} м²</span></li>
                        <li><span>Количество спален</span><span>{{ project.bedrooms_quantity }}</span></li>
                        <li><span>Количество санузлов</span><span>{{ bathrooms.quantity }}</span></li>
                        <li><span>Стоимость</span><span>от {{ project.price|price_format }} р</span></li>
                    </ul>
                </div>
            </div>
            <div class="best-projects__order-button openModal">
                <button>Заказать строительство</button>
            </div>
            <div class="best-projects__more-button">
                <a target="_blank" href="{{ project.get_absolute_url }}">Узнать подробнее</a>
            </div>
        </div>
        {% endfor %}
        <div class="best-projects__to-catalog--adaptive">
            <a target="_blank" href="{% url 'projects:catalog' %}">
                В каталог
            </a>
        </div>
    </div>
</div>

<div class="about">
    <div class="about-company container">
        <div class="about-company__big-left-column">
            <div class="about-company__heading">
                <h4>О компании</h4>
                <hr>
            </div>
            <div>
                <div class="about-company__row">
                    <div class="about-company__photo">
                        <img src="static/images/about-company.png" alt="">
                    </div>
                    <div class="about-company__textblock">
                        <div class="about-company__details-heading">
                            <h5>Воистину радостный звук:<br> старческий скрип Амстердама</h5>
                        </div>
                        <div class="about-company__details-text">
                            <p class="font__inter">Противоположная точка зрения подразумевает, что
                                реплицированные с зарубежных источников, современные исследования и по сей день
                                остаются уделом либералов, которые жаждут быть обнародованы. Вот вам яркий
                                пример современных тенденций — семантический разбор внешних противодействий
                                обеспечивает актуальность форм воздействия. </p>
                        </div>
                        <div class="about-company__watch-more">
                            <a href="{% url 'contacts:about_company' %}">
                                <img src="static/images/watch-more.svg" alt="">
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="about-company__big-right-column">
            <div>
                <img src="static/images/about-company2.png" alt="">
            </div>
        </div>
    </div>

    <div class="work-stages container">
        <div class="work-stages__heading">
            <h4>Этапы работы</h4>
            <hr>
        </div>
        <div class="work-stages__cards">
            <div class="work-stages__info-card">
                <div class="work-stages__card-header">
                    <div class="work-stages__card-number">
                        01
                    </div>
                    <div>
                        <p class="work-stages__card-heading">Консультация</p>
                    </div>
                </div>
                <p>Вы приезжаете на встречу к нам в офис выберете понравившийся проект
                    дома или предоставите свой. Узнаете точную стоимость строительства
                    вашего дома, сможете выбрать земельный участок, если у вас его еще нет.</p>
            </div>
            <div class="work-stages__info-card">
                <div class="work-stages__card-header">
                    <div class="work-stages__card-number">
                        02
                    </div>
                    <div>
                        <p class="work-stages__card-heading">Подготовка документации</p>
                    </div>
                </div>
                <p>Производятся расчеты конструкций, формирование рабочих чертежей
                    с точными размерами, калькуляция всех объемов материалов по выбранному
                    проекту. На сайте представлены типовые проекты домов, вы можете внести
                    свои пожелания в любой понравившийся, чтобы дом был максимально идеальным для вас</p>
            </div>
            <div class="work-stages__image-card">
                <img src="static/images/work-stages-1.png" alt="">
            </div>
            <div class="work-stages__info-card">
                <div class="work-stages__card-header">
                    <div class="work-stages__card-number">
                        03
                    </div>
                    <div>
                        <p class="work-stages__card-heading">Строительство</p>
                    </div>
                </div>
                <p>Начинаем строительство. Все работы по данному виду услуг ведутся квалифицированными специалистами.
                    Все вопросы и проблемы, возникающие в ходе проведения работ, могут
                    решаться без вашего участия, с предварительным согласованием
                </p>
            </div>
            <div class="work-stages__image-card">
                <img src="static/images/work-stages-0.png" alt="">
            </div>
            <div class="work-stages__info-card">
                <div class="work-stages__card-header">
                    <div class="work-stages__card-number">
                        01
                    </div>
                    <div>
                        <p class="work-stages__card-heading">Сдача дома</p>
                    </div>
                </div>
                <p>Любая недвижимость, прежде чем на ее территории будут проживать люди,
                    должна получить официальное разрешение на ее использование по назначению.
                    Наш юрист самостоятельно готовит документацию и проходит все инстанции.
                    Вам остается только приехать, получить весь пакет зарегистрированных
                    документов и получить ключи от вашего дома</p>
            </div>
        </div>
    </div>

    <div class="team">
        <div class="container">
            <div class="team__heading">
                <h4>Наша команда</h4>
                <hr>
            </div>
        </div>
        <div class="team__cards">
            {% for worker in workers %}
            <div class="team__slider-item">
                <div>
                    <img src="{{ worker.photo.url }}" alt="">
                </div>
                <div class="team__name">
                    <p>{{ worker.first_name }} {{ worker.last_name }}</p>
                </div>
                <hr>
                <div class="team__role">
                    <p>{{ worker.role }}</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<div class="feedback">
    <div class="feedback__background">
        <div class="feedback__row container">
            <div class="feedback__column">
                <div class="feedback__form">
                    <div class="feedback__heading">
                        <p>Закажите строительство дома</p>
                        <p>прямо сейчас!</p>
                    </div>
                    <form action="" id="feedbackForm">
                        {% csrf_token %}
                        <div class="feedback__input feedback__name-input">
                            {{ feedback_form.name }}
                        </div>
                        <div class="feedback__input">
                            {{ feedback_form.phone }}
                        </div>
                        <div class="feedback__agreement">
                            <div class="feedback__checkbox-wrap">
                                <input type="checkbox" id="consent" name="consent" required>
                            </div>
                            <div>
                                <label for="consent" class="feedback__checkbox-label">
                                    Даю своё согласие на обработку моих
                                    <a id="userAgreementLink" target="_blank">персональных данных</a>
                                </label>
                            </div>
                        </div>
                        <div class="feedback__button">
                            <button>
                                <img src="static/images/send.svg" alt="">
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

    </div>
</div>

<div class="reviews container">
    <div class="reviews__heading">
        <h4>Отзывы наших клиентов</h4>
        <hr>
    </div>
    <div class="reviews__slider">
        <div class="reviews__card">
            <div class="reviews__card-header">
                <div>
                    <img src="static/images/avatar.png" alt="">
                </div>
                <div class="reviews__card-author-name">
                    <p>Евгений Пастухов</p>
                </div>
            </div>
            <div class="reviews__card-text font__inter">
                Противоположная точка зрения подразумевает, что непосредственные участники технического
                прогресса представляют собой не что иное, как квинтэссенцию победы маркетинга над разумом и
                должны быть в равной степени предоставлены сами себе. Банальные, но неопровержимые выводы, а
                также независимые государства призывают нас к новым свершениям. Противоположная точка зрения
                подразумевает, что непосредственные участники технического
                прогресса представляют собой не что иное, как квинтэссенцию победы маркетинга над разумом и
                должны быть в равной степени предоставлены сами себе. Банальные, но неопровержимые выводы, а
                также независимые государства призывают нас к новым свершениям
            </div>
            <div>
                <i class="reviews__card-date">30.11.2024</i>
            </div>
            <div class="reviews__card-images">
                <div class="reviews__card-image">
                    <img src="static/images/gallery1.png" alt="">
                </div>
                <div class="reviews__card-image">
                    <img src="static/images/gallery1.png" alt="">
                </div>
                <div class="reviews__card-image">
                    <img src="static/images/gallery1.png" alt="">
                </div>
            </div>

            <div class="reviews__card-details">
                <div class="reviews__card-stars">
                    <img src="static/images/five-stars — копия.svg" alt="">
                </div>
                <div class="reviews__platform">
                    <div>
                        <img src="static/images/yandex.svg" alt="">
                    </div>
                    <div class="reviews__platform-stats font__inter">
                        <p>5.0 (230)</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="reviews__card">
            <div class="reviews__card-header">
                <div>
                    <img src="static/images/avatar.png" alt="">
                </div>
                <div>
                    <p class="reviews__card-author-name">Евгений Пастухов</p>
                </div>
            </div>
            <div class="reviews__card-text font__inter">
                Противоположная точка зрения подразумевает, что непосредственные участники технического
                прогресса представляют собой не что иное, как квинтэссенцию победы маркетинга над разумом и
                должны быть в равной степени предоставлены сами себе. Банальные, но неопровержимые выводы, а
                также независимые государства призывают нас к новым свершениям
            </div>
            <div>
                <i>30.11.2024</i>
            </div>
            <div class="reviews__card-images">
                <div class="reviews__card-image">
                    <img src="static/images/gallery1.png" alt="">
                </div>

            </div>

            <div class="reviews__card-details">
                <div>
                    <img src="static/images/five-stars — копия.svg" alt="">
                </div>
                <div class="reviews__platform">
                    <div>
                        <img src="static/images/yandex.svg" alt="">
                    </div>
                    <div class="reviews__platform-stats font__inter">
                        <p>5.0 (230)</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="reviews__card">
            <div class="reviews__card-header">
                <div>
                    <img src="static/images/avatar.png" alt="">
                </div>
                <div>
                    <p class="reviews__card-author-name">Евгений Пастухов</p>
                </div>
            </div>
            <div class="reviews__card-text">
                <p class="font__inter">Противоположная точка зрения подразумевает, что непосредственные участники
                    технического
                    прогресса представляют собой не что иное, как квинтэссенцию победы маркетинга над разумом и
                    должны быть в равной степени предоставлены сами себе. Банальные, но неопровержимые выводы, а
                    также независимые государства призывают нас к новым свершениям свершен</p>
            </div>
            <div>
                <i>30.11.2024</i>
            </div>
            <div class="reviews__card-images">
                <div class="reviews__card-image">
                    <img src="static/images/gallery1.png" alt="">
                </div>
                <div class="reviews__card-image">
                    <img src="static/images/gallery1.png" alt="">
                </div>
            </div>

            <div class="reviews__card-details">
                <div>
                    <img src="static/images/five-stars — копия.svg" alt="">
                </div>
                <div class="reviews__platform">
                    <div>
                        <img src="static/images/yandex.svg" alt="">
                    </div>
                    <div class="reviews__platform-stats font__inter">
                        <p>5.0 (230)</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="reviews__card">
            <div class="reviews__card-header">
                <div>
                    <img src="static/images/avatar.png" alt="">
                </div>
                <div>
                    <p class="reviews__card-author-name">Евгений Пастухов</p>
                </div>
            </div>
            <div class="reviews__card-text">
                <p class="font__inter">Противоположная точка зрения подразумевает, что непосредственные участники
                    технического
                    прогресса представляют собой не собой не собой не собой не собой не собой не</p>
            </div>
            <div>
                <i>30.11.2024</i>
            </div>
            <div class="reviews__card-images">
                <div>
                    <img src="static/images/gallery1.png" alt="">
                </div>
                <div>
                    <img src="static/images/gallery1.png" alt="">
                </div>
                <div>
                    <img src="static/images/gallery1.png" alt="">
                </div>
            </div>

            <div class="reviews__card-details">
                <div>
                    <img src="static/images/five-stars — копия.svg" alt="">
                </div>
                <div class="reviews__platform">
                    <div>
                        <img src="static/images/yandex.svg" alt="">
                    </div>
                    <div class="reviews__platform-stats font__inter">
                        <p>5.0 (230)</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="gallery">
    <div class="container">
        <div class="gallery__heading">
            <h4>Фотогалерея</h4>
        </div>
    </div>

    <div class="gallery__slider">
        {% for gallery_photo in gallery_photos %}
        <div class="gallery__photo">
            <img src="{{ gallery_photo.photo.url }}" alt="">
        </div>
        {% endfor %}
    </div>
</div>

<div class="news container">
    <div class="news__header">
        <div class="news__header-left">
            <div class="news__heading">
                <h4>Наши новости</h4>
            </div>
        </div>
        <div class="news__header-right">
            <div class="news__header-right-buttons">
                <div class="news__header-button">
                    <a href="{% url 'blog:blog' %}">Блог</a>
                </div>
                <div class="news__header-button">
                    <a href="{% url 'blog:blog' %}">Новости</a>
                </div>
            </div>
            <div class="news__header-more">
                <a href="{% url 'blog:blog' %}">Смотреть всё</a>
            </div>
        </div>
    </div>
    <div class="news__list">
        <hr>
        {% for article in articles %}
            <div>
                <div class="news__content">
                    <div class="news__small-left-column">
                        <div class="news__photo">
                            <img src="{{ article.image.url }}" alt="">
                        </div>
                    </div>
                    <div class="news__big-right-column">
                        <div class="news__new-heading">
                            <a href="{{ article.get_absolute_url }}">{{ article.title }}</a>
                        </div>
                        <div class="news__new-text font__inter"">
                            {{ article.paragraphs.all.0.content|truncatechars_html:100  }}
                        </div>
                        <div class="news__info">
                            <div class="news__date">
                                <i>{{ article.created_at|date:"d.m.Y" }}</i>
                            </div>
                            <div class="news__read-button-adaptive">
                                <a href="{{ article.get_absolute_url }}">Читать далее</a>
                            </div>
                        </div>
                    </div>
                    <div class="news__read-button">
                        <a href="{{ article.get_absolute_url }}">
                            <button>
                                <img src="{% static 'images/read-news.svg' %}" alt="">
                            </button>
                        </a>
                    </div>
                </div>
            </div>
            {% if not forloop.last %}
                <hr>
            {% endif %}
        {% endfor %}
    </div>
    <div class="news__read-all--adaptive">
        <a href="{% url 'blog:blog' %}">Смотреть всё</a>
    </div>
</div>

<div class="information">
    <div class="answers container">
        <div class="answers__heading">
            <h4>Ответы на вопросы</h4>
        </div>

        <div class="half">
            <div class="tab">
                <input id="tab-1" type="checkbox" name="tabs">
                <div class="tab-label">
                    <label for="tab-1">Вы знаете свой веб-сайт</label>
                </div>
                <hr>
                <div class="tab-content">
                    <p>Ваша идеальная тема также зависит от типа контента, который публикует ваш сайт. По сути,
                        вы хотите смотреть на такие вещи, как скорость загрузки, хотите ли вы современный дизайн
                        или что-то действительно простое, такие функции, как магазин электронной коммерции, блог
                        или видеоблог, а также количество изображений и текст в теме.</p>
                </div>
            </div>
            <div class="tab">
                <input id="tab-2" type="checkbox" name="tabs">
                <div class="tab-label">
                    <label for="tab-2">Вы знаете свой веб-сайт</label>
                </div>
                <hr>
                <div class="tab-content">
                    <p>Ваша идеальная тема также зависит от типа контента, который публикует ваш сайт. По сути,
                        вы хотите смотреть на такие вещи, как скорость загрузки, хотите ли вы современный дизайн
                        или что-то действительно простое, такие функции, как магазин электронной коммерции, блог
                        или видеоблог, а также количество изображений и текст в теме.</p>
                </div>
            </div>
            <div class="tab">
                <input id="tab-3" type="checkbox" name="tabs">
                <div class="tab-label">
                    <label for="tab-3">Вы знаете свой веб-сайт</label>
                </div>
                <hr>
                <div class="tab-content">
                    <p>Ваша идеальная тема также зависит от типа контента, который публикует ваш сайт. По сути,
                        вы хотите смотреть на такие вещи, как скорость загрузки, хотите ли вы современный дизайн
                        или что-то действительно простое, такие функции, как магазин электронной коммерции, блог
                        или видеоблог, а также количество изображений и текст в теме.</p>
                </div>
            </div>
        </div>
    </div>

    <div class="contacts container">
        <div class="contacts__small-left-column">
            <div class="contacts__heading">
                <h4>Контакты</h4>
            </div>
            <div class="contacts__info">
                <div class="contacts__block">
                    <div>
                        <img src="static/images/contacts-icon-1.svg" alt="">
                    </div>
                    <div>
                        <div class="contacts__block-heading">
                            <p>Главный офис:</p>
                        </div>
                        <div class="font__inter">
                            <p>{{ company_info.address }}</p>
                        </div>
                    </div>
                </div>
                <div class="contacts__block">
                    <div>
                        <img src="static/images/contacts-icon-2.svg" alt="">
                    </div>
                    <div>
                        <div class="contacts__block-heading">
                            <p>Время работы:</p>
                        </div>
                        <div class="font__inter">
                            <p>{{ company_info.working_mode }}</p>
                        </div>
                    </div>
                </div>
                <div class="contacts__block">
                    <div>
                        <img src="static/images/contacts-icon-3.svg" alt="">
                    </div>
                    <div>
                        <div class="contacts__block-heading">
                            <p>Телефон:</p>
                        </div>
                        <div class="font__inter">
                            <p>+7 (908) 998-58-70</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="contacts__big-right-column">
            <div class="map" id="map">

            </div>
        </div>

    </div>
</div>
{% endblock %}

{% block script %}
<script type=module src="{% static 'js/home.js' %}"></script>
<script>
    $(document).ready(function () {
        $('.slider').slick({
            dots: true,
            infinite: true,
            speed: 500,
            slidesToShow: 1,
            adaptiveHeight: false,
            autoplay: false,
        });
    });
    $(document).ready(function () {
        $('.photo-slider').slick({
            dots: true,
            infinite: true,
            speed: 500,
            slidesToShow: 1,
            adaptiveHeight: false,
            autoplay: false,
        });
    });
    $(document).ready(function () {
        $('.team__cards').slick({
            arrows: true,
            infinite: true,
            slidesToShow: 4,
            slidesToScroll: 1,
            centerMode: true,
            responsive: [
                {
                    breakpoint: 1024,
                    settings: {
                        slidesToShow: 3,
                        slidesToScroll: 1
                    }
                },
                {
                    breakpoint: 768,
                    settings: {
                        centerMode: true,
                        slidesToShow: 2,
                        slidesToScroll: 1
                    }
                },
                {
                    breakpoint: 576,
                    settings: {
                        centerMode: true,
                        slidesToShow: 1,
                        slidesToScroll: 1,
                    }
                }
            ]
        });
    });
    $(document).ready(function () {
        $('.reviews__slider').slick({
            arrows: true,
            infinite: true,
            slidesToShow: 3,
            slidesToScroll: 1,
            responsive: [
                {
                    breakpoint: 1024,
                    settings: {
                        slidesToShow: 3,
                        slidesToScroll: 1
                    }
                },
                {
                    breakpoint: 768,
                    settings: {
                        slidesToShow: 2,
                        slidesToScroll: 1
                    }
                },
                {
                    breakpoint: 576,
                    settings: {
                        centerMode: true,
                        slidesToShow: 1,
                        slidesToScroll: 1
                    }
                }
            ]
        });
    });
    $(document).ready(function () {
        $('.gallery__slider').slick({
            centerMode: true,
            arrows: true,
            infinite: true,
            slidesToShow: 3,
            slidesToScroll: 1,
            responsive: [,
                {
                    breakpoint: 1200,
                    settings: {
                        slidesToShow: 2,
                        slidesToScroll: 1
                    }
                },
                {
                    breakpoint: 1024,
                    settings: {
                        slidesToShow: 1,
                        slidesToScroll: 1
                    }
                },
                {
                    breakpoint: 768,
                    settings: {
                        slidesToShow: 1,
                        slidesToScroll: 1
                    }
                },
                {
                    breakpoint: 576,
                    settings: {
                        centerMode: true,
                        slidesToShow: 1,
                        slidesToScroll: 1
                    }
                }
            ]
        });
    });

    // Яндекс Карты
    var myMap;
    ymaps.ready(function () {
        myMap = new ymaps.Map("map", {
            center: [43.157062, 131.926061],
            zoom: 16,
            controls: []
        });
        var o = new ymaps.control.ZoomControl({
            options: {
                position: {
                    right: 10,
                    top: 50
                },
                size: "small"
            }
        });
        myMap.controls.add(o);
        myMap.behaviors.disable("scrollZoom");
        var s = new ymaps.Placemark([43.157062, 131.926061], {
            hintContent: "Волгоградская улица, 7А",
            balloonContent: "Волгоградская улица, 7А"
        }, {
            iconLayout: "default#image",
            iconImageHref: `/static/images/pin.svg`,
            iconImageSize: [30, 42],
            iconImageOffset: [-15, -42]
        });
        myMap.geoObjects.add(s);
    });

    document.addEventListener('DOMContentLoaded', () => {

        let checkboxes = document.querySelectorAll('.tab input');

        checkboxes.forEach(checkbox => {
            checkbox.addEventListener('click', function () {
                let parent = this.parentNode;

                (!parent.classList.contains('selected')) ?
                    parent.classList.add('selected') :
                    parent.classList.remove('selected');
            });
        });
    });

    // Форма обратной связи
    var feedbackForm = document.getElementById("feedbackForm");
    var phoneInput = feedbackForm.querySelector('input[type="tel"]');
    var phoneMask = IMask(phoneInput, { mask: "+{7} (000) 000 00 00" });
    const successSection = document.getElementById('modalSuccess');
    function validatePhoneNumber() {
        let t = phoneInput.value.replace(/\D/g, "");
        return t.length < 11 ? (phoneInput.setCustomValidity("Необходимо минимум 11 цифр"), !1) : (phoneInput.setCustomValidity(""), !0)
    }
    phoneInput.addEventListener("input", function () {
        validatePhoneNumber()
    });

    feedbackForm.addEventListener("submit", async function (t) {
        t.preventDefault();
        let e = new FormData(feedbackForm),
            o = document.querySelector('input[name="csrfmiddlewaretoken"]').value;
        feedbackForm.reset();
        
        successSection.style.display = 'flex';
        try {
            let s = await fetch(`${window.location.origin}/contacts/api/save-request/`, {
                method: "POST",
                body: e,
                headers: {
                    "X-CSRFToken": o
                }
            });
            s.status
        } catch (n) {
            console.error("Ошибка запроса:", n)
        }
    });
</script>
<script>
    // Фильтрация лучших проектов
    $(document).ready(function() {
        $('#bestProjectsForm input, #bestProjectsForm select').on('change input', function(event) {
            let formData = $('#bestProjectsForm').serialize();

            let cardsContainer = $('.best-projects__cards');
            cardsContainer.addClass('fade-out');

            timeout = setTimeout(function () {
                $.ajax({
                    url: "{% url 'home:best_projects_filter' %}",  
                    type: "GET",
                    data: formData,
                    success: function(response) {
                        cardsContainer.html(response.html);

                        cardsContainer.removeClass('fade-out').addClass('fade-in');

                        $(document).ready(function () {
                            $('.photo-slider').slick({
                                dots: true,
                                infinite: true,
                                speed: 500,
                                slidesToShow: 1,
                                adaptiveHeight: false,
                                autoplay: false,
                            });
                        });
                        setTimeout(() => {
                            cardsContainer.removeClass('fade-in');
                        }, 500);
                    },
                    error: function(xhr, status, error) {
                        console.error("Ошибка при фильтрации:", error);
                    }
                });
            }, 200); 

            
        });
    });
</script>

<script>
    // Сброс input radio
    document.addEventListener("DOMContentLoaded", function () {
    const radioButtons = document.querySelectorAll('.radio-toggle');

    radioButtons.forEach(function (radio) {
        radio.addEventListener('click', function () {
            if (this.dataset.wasChecked === "true") {
                this.checked = false;
                this.dataset.wasChecked = "false";
            } else {
                this.dataset.wasChecked = "true";
            }

            radioButtons.forEach(function (otherRadio) {
                if (otherRadio !== radio && otherRadio.name == radio.name) {
                    otherRadio.dataset.wasChecked = "false";
                }
            });

            // Перерисовка карточек после отмены фильтра
            let formData = $('#bestProjectsForm').serialize();

            let cardsContainer = $('.best-projects__cards');
            cardsContainer.addClass('fade-out');

            timeout = setTimeout(function () {
                $.ajax({
                    url: "{% url 'home:best_projects_filter' %}",  
                    type: "GET",
                    data: formData,
                    success: function(response) {
                        cardsContainer.html(response.html);

                        cardsContainer.removeClass('fade-out').addClass('fade-in');

                        $(document).ready(function () {
                            $('.photo-slider').slick({
                                dots: true,
                                infinite: true,
                                speed: 500,
                                slidesToShow: 1,
                                adaptiveHeight: false,
                                autoplay: false,
                            });
                        });
                        setTimeout(() => {
                            cardsContainer.removeClass('fade-in');
                        }, 500);
                    },
                    error: function(xhr, status, error) {
                        console.error("Ошибка при фильтрации:", error);
                    }
                });
            }, 200); 
        });
    });
});
</script>
{% endblock %}